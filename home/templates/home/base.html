<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/bootstrap.css' %}">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/meanmenu.css' %}">
    <!-- Prism CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/prism.css' %}">
    <!-- Boxicon  CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/boxicons.min.css' %}">
    <!-- Icon CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/icon.css' %}">

    <link rel="stylesheet" href="{% static 'basic/css/emojionearea.min.css' %}">
    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'basic/css/style.css' %}">
    <title>Ground</title>
</head>

<body>
    <div>
        {% include 'home/navbar.html' %}
    </div>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                {% block content %}
                {% endblock content %}
            </div>
        </div>
    </div>

    <!-- jQuery Min JS -->
    <script src="{% static 'basic/js/jquery.js' %}"></script>
    <!-- Boostrap Js  -->
    <script src="{% static 'basic/js/bootstrap.js' %}"></script>
    <!-- Popper Js  -->
    <script src="{% static 'basic/js/popper.js' %}"></script>
    <!-- MeanMenu Js  -->
    <script src="{% static 'basic/js/jquery.meanmenu.js' %}"></script>
    <!-- Prism Js  -->
    <script src="{% static 'basic/js/prism.js' %}"></script>
    <!-- Prism Js  -->
    <script src="{% static 'basic/js/boxicons.js' %}"></script>

    <script src="{% static 'basic/js/emojionearea.min.js' %}"></script>
    <!-- Main Js  -->
    <script src="{% static 'basic/js/main.js' %}"></script>

    <script>
        $(document).ready(function () {

            $('.like-button').click(function () {
                $(this).toggleClass('is-active');
            })

        })


    </script>

    <!-- <script>
        $(document).ready(function () {
            $(".comment").click(function () {
                $(".comments").toggle();
            });
        });
    </script> -->

    <script>
        function replyFunction() {
            document.getElementById('replyField').className = "show";
        }
    </script>

    <script>
        function postMenuFunction() {
            document.getElementById("postdrop").classList.toggle("show");
        }
        window.onclick = function (event) {
            if (!event.target.matches('.postbtn')) {
                var dropdowns = document.getElementsByClassName("menu-content");
                var i;
                for (i = 0; i < dropdowns.length; i++) {
                    var openDropdown = dropdowns[i];
                    if (openDropdown.classList.contains('show')) {
                        openDropdown.classList.remove('show');
                    }
                }
            }
        }
    </script>

    <script>

        $('#copy').on('click', function (event) {
            console.log(event);
            copyToClipboard(event);
        });

        function copyToClipboard(e) {
            var
                t = e.target,
                c = t.dataset.copytarget,
                inp = (c ? document.querySelector(c) : null);
            console.log(inp);
            if (inp && inp.select) {
                inp.select();
                try {
                    document.execCommand('copy');
                    inp.blur();

                    t.classList.add('copied');
                    setTimeout(function () {
                        t.classList.remove('copied');
                    }, 1500);
                } catch (err) {
                    alert('please press Ctrl/Cmd+C to copy');
                }

            }

        }
    </script>

    <script>
        setTimeout(function () { $('.alert').alert('close') }, 3000);
    </script>

    <script>
        var autoExpand = function (field) {
            field.style.height = 'inherit';

            var computed = window.getComputedStyle(field);
            var height = parseInt(computed.getPropertyValue('border-top-width'), 10)
                + parseInt(computed.getPropertyValue('padding-top'), 10)
                + field.scrollHeight
                + parseInt(computed.getPropertyValue('padding-bottom'), 10)
                + parseInt(computed.getPropertyValue('border-bottom-width'), 10);

            field.style.height = height + 'px';

        };

        document.addEventListener('input', function (event) {
            if (event.target.tagName.toLowerCase() !== 'textarea') return;
            autoExpand(event.target);
        }, false);
    </script>

    <script>
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>

    <script>
        const actualBtn = document.getElementById('actual-btn');
        const fileChosen = document.getElementById('file-chosen');
        actualBtn.addEventListener('change', function () {
            fileChosen.textContent = this.files[0].name
        })
    </script>

    <script>
        $(document).on("scroll", function () {
            if ($(document).scrollTop() > 10) {
                $(".main-nav").addClass("is-sticky ");
            } else {
                $(".main-nav").removeClass("is-sticky ");
            }
        });
    </script>

    <script>

        $('.like-form').submit(function (e) {
            e.preventDefault()

            const post_id = $(this).attr('id')

            const likeText = $(`.like-button${post_id}`).text()
            const trim = $.trim(likeText)

            const url = $(this).attr('action')

            let res;
            const likes = $(`.like-count${post_id}`).text()
            const trimCount = parseInt(likes)

            $.ajax({
                type: 'POST',
                url: url,
                data: {
                    'csrfmiddlewaretoken': $('input[name=csrfmiddlewaretoken]').val(),
                    'post_id': post_id,
                },
                success: function (response) {
                    if (trim === 'Unlike') {
                        $(`.like-button${post_id}`).text('Like')
                        res = trimCount - 1
                    } else {
                        $(`.like-button${post_id}`).text('Unlike')
                        res = trimCount + 1
                    }

                    $(`.like-count${post_id}`).text(res)
                },
                error: function (response) {
                    console.log('error', response)
                }
            })

        })


    </script>

    <script>
        $(document).ready(function () {
            $(".commentText").emojioneArea({
                pickerPosition: "right",
                search: false,
                useInternalCDN: true,
                recentEmojis: false,
            })
        });
    </script>

</body>

</html>