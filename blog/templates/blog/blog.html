{% extends 'home/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="post-banner-area ">
    <div class="d-table">
        <div class="d-table-cell">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-12 text-center">
                        <div class="banner-tittle">
                            <h1>
                                Blog
                            </h1>
                        </div>
                        <ul class="head-list">
                            <li>
                                <a href="/">
                                    Home
                                </a>
                            </li>
                            <li>Blog</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<section class="home-blog-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="widget widget_search">
                    <div class="post-wrap">
                        <form class="search-form">
                            <label>
                                <input type="search" class="search-field" placeholder="Search...">
                            </label>
                            <button type="submit"><i class="bx bx-search"></i></button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 offset-lg-3">
                <button type="button" class="box-btn w-100" data-toggle="modal" data-target="#askQuestion">
                    Create Blog
                </button>
                <a href="{% url 'blog:create_blog' %}">Create Blog</a>

                <div class="modal fade" id="askQuestion" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
                    aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">    
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form action="" method="POST">
                                    {% csrf_token %}
                                    {{blog_create_form}}
                                    <button type="submit" class="box-btn mt-4 w-100" name="blog_submit_form">Post</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
        {% for blog  in blog_obj %}
            <div class="col-lg-4 col-md-6">
                <div class="single-blog">
                    <div class="content">
                        <ul>
                            <li>
                                {{blog.created}}
                            </li>
                            <li>
                                <a href=""><span>By {{blog.author.user}}</span></a>
                            </li>
                        </ul>

                        <a href="#">
                            <h3>{{blog.title}}</h3>
                        </a>
                        <p>{{blog.content|slice:'20'|safe}}</p>
                        <p>{{blog.category}}</p>
                        
                        <form action="{% url 'blog:single_blog' blog.pk  %}" id='{{blog.id}}' method="POST" >
                            {% csrf_token %}
                            <input type="hidden" name="read_more" value="{{blog.id}}">
                            <button type="submit">Read More</button>
                        </form>
                        <p>Total Read: {{blog.read.all.count}}</p>
                        {% comment %} <a href="{% url 'blog:single_blog' blog.pk request.user.id %}" class="line-bnt">Read More</a> {% endcomment %}
                    </div>
                </div>
            </div>
        {% endfor %}
        </div>
    </div>
</section>
{% include "home/footer.html" %}
{% endblock content %}